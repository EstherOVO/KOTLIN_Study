# 코틀린(Kotlin)

# ▨ 코틀린(Kotlin) ▨
## :pushpin: 코틀린 언어 소개
- JetBrains 사에서 오픈소스 그룹을 만들어 개발한 프로그래밍 언어
- 2011년에 개발되고 2016년에 정식 출시되었다.
- 자바를 대체할 목적으로 만들어진 언어
  - 자바의 단점 : 코드가 장황하고 복잡하며, 설계나 null을 다루는 문제가 있다.
    - 해당 단점을 개선하고자 만든 언어
  - 코틀린의 특징
    - 간결한 코드
    - 안전한 코드
    - 자바와 100% 호환
    - 함수형 프로그래밍 지원
- Android 개발사 구글이 2017년에 안드로이드 공식 언어로 코틀린을 추가
- 2019년부터 Kotlin First를 선언하며 공식 문서 샘플 코드를 Java에서 Kotlin으로 우선 변경
  - 이후 구글에서 작성하는 안드로이드 프로젝트는 Kotlin으로 작성

## :pushpin: 코틀린에 대한 조각 지식
- 코틀린은 정적 타입 언어
- 무료 오픈 소스 아파치2.0 라이센스 : 상업적 이용에 제한을 두고 있지 않다.
- 확장자는 ~.kt 이다.
- 자바와 다르게 문장의 끝에 세미콜론을 붙이지 않아도 된다.
- 주석 처리 방법은 자바와 동일하다.
- 별도의 접근 제한자를 붙이지 않으면 모두 `public`이다.
- 함수는 `fun`이라는 키워드를 사용한다.
- 자바에서는 `타입 변수명`이지만, 코틀린에서는 `변수명: 타입`으로 선언한다.
- 변수나 함수, 클래스 모두 Top-Level(최상단)에 선언 가능하다.

# ▨ 변수(Variable) ▨
## :pushpin: 변수 선언
1. `val` : Value
   - 자바에서의 `final` 키워드와 유사하다,
   - 불변(immutable) 변수 → 한 번 초기화하면 값을 변경할 수 없다.
2. `var` : Variable
   - 가변(mutable) 변수
   - 초기화 후에도 값을 변경할 수 있다.
   - 값이 업데이트 되어야 하는 경우에 `var`를 사용한다.
- 타입을 명시적으로 작성하지 않아도 초기화된 값을 기준으로 타입을 추론한다.
- 만약 초기 값을 작성하지 않는 경우 반드시 명시적으로 타입을 작성해야 한다.
- 모든 변수는 우선 `val`로 만들고 업데이트가 필요한 경우 `var`를 사용한다.

## :pushpin: 코틀린의 타입
- 자바의 Primitive Type에 해당하는 Basic Type 기본 타입
- 일반 클래스(포장 클래스)처럼 보이는 형태로 작성되지만, 내부적(컴파일 단계)으로는 Primitive Type로 처리된다.
- 객체를 인스턴스화할 때 new 키워드를 붙이지 않는다.
- 자바에서처럼 자동 프로모션 캐스팅은 되지 않는다.
  - 명시적으로 타입을 변환해 줘야 한다. `변수명.toType()` 예시) `number.toLong()`
- 타입 체크
  - 자바에서 `instanceOf`로 타입 확인
  - 코틀린에서는 `is` → `변수 is 타입`
  - `is`로 체크되어 true가 된 타입은 스마트 캐스팅되어 해당 클래스 사용 가능하다.
- 코틀린의 특수 타입
  1. `Any` : 모든 객체의 최상위 타입
  2. `Unit` : 자바의 `void`에 해당 → 리턴 값이 없고, 생략이 가능
  3. `Nothing` : 함수가 정상적으로 끝나지 않음
- 문자열 템플릿
  - 문자열 내부에 `${변수명}`, `${표현식}` 등으로 사용 가능
  - 가독성 높은 깔끔한 코딩 가능

# ▨ 연산자(Operator) ▨
## :pushpin: 코틀린의 연산자
- 기본적인 단항, 산술, 대입 연산자는 자바와 동일
- 비교 연산자 : 객체 간의 비교 연산자가 사용이 가능(Comparable 인터페이스 구현 시)
- 동등성 비교 : `==` (자바의 `equals`)
- 동일성 비교 : `===` (자바의 `==`)
- 특수 연산자
  1. `in` : 컬렉션이나 범위에 포함
  2. `a..b` : a부터 b까지의 범위(a와 b 포함)
  3. `a[i]` : 특정 인덱스의 값을 가져옴
  4. `a[i] = b` : 특정 인덱스의 값을 넣음

# ▨ 제어문(Control) ▨
## :pushpin: 코틀린의 제어문
1. if 문
   - 기본적으로 자바와 동일
   - 자바에서 `if-else`는 Statement, 코틀린에서는 Expression
2. when 문
   - 자바의 `switch-case`의 확장
   - 여러 개의 조건이나 타입, 범위, 클래스와 조합해서 사용 가능
3. for 문
   - for-each : `for (number in numbers)`
   - 기본 for 문 : `for (1 in 1..100)`
     - 등차수열 방식으로 `step`, `downTo` 로 스텝, 역순 등을 조정할 수 있음
4. while 문
   - 자바와 동일

# ▨ 널 안전성(Null Safety) ▨
## :pushpin: 널 안전성(Null Safety)
- 코틀린의 변수는 기본적으로 Null을 허용하지 않는다.
  - 잠재적인 NPE 문제에 대해서 안전성을 갖춤
1. Nullable `Type?` : Null 값이 필요한 경우 명시적으로 선언
2. Safety Call `?.` : Null 값이 포함될 수 있는 속성이나 함수는 안전 호출
3. Elvis Operator `?:` : Null 값이 감지될 경우 어떻게 할지 선언
4. 단언 연산자 `!!` :  강제로 Null 안전하다고 선언

# ▨ 예외 처리(Exception) ▨
## :pushpin: 예외 처리(Exception)
- Checked Exception : 컴파일 시점 처리를 강제하는 예외
- Unchecked Exception : 런타임에 발생하는 예외
- 코틀린은 자바돠 다르게 모든 예외가 Unchecked Exception
- 예외 발생 코드를 최소화하고, 발생 가능성 있는 예외는 적절하게 처리

# ▨ 함수(Function) ▨
## :pushpin: 함수(Function)
- 선언 문법
  ```
  접근지시어 fun 함수이름(매개변수): 리턴타입 {}
  ```
- 단일 표현식 : 함수가 한 줄일 때는 중괄호와 리턴 생략 `=`으로 대입
- 기본매개변수 : 매개변수에 기본 값 설정 가능(자바의 오버로딩 효과)
- 이름있는 인자 : 호출할 때 인자에 파라미터 이름 지정 가능 (자유로운 순서)
- 가변인자 : `vararg` 키워드로 같은 타입의 매개변수 입력 가능

# ▨ 클래스(Class) ▨
## :pushpin: 클래스(Class)
- 코틀린은 클래스의 데이터를 저장하는 변수를 `필드`가 아닌 `프로퍼티`라고 부른다.
- 프로퍼티(Property)
  - 프로퍼티는 필드와 게터가 세터를 포함하는 개념
  - 프로퍼티 = 필드 + 게터 + 세터
  - 코틀린에서는 게터와 세터를 선언하지 않아도 접근자(.)를 통해 호출 가능
  - `var`로 선언 : 가변 프로퍼티(읽기 및 쓰기 가능)
  - `val`로 선언 : 불변 프로퍼티(읽기 가능)
- 생성자(constructor)
  - `constructor` 키워드(생략 가능) 클래스 선언부에 주생성자를 선언
  - 코틀린에서는 주 생성자가 필수
  - 초기화 블록과 부 생성자를 추가로 만들 수 있다.
  - 부 생성자에서는 주 생성자를 호출해야 한다.
- 커스텀 게터, 커스텀 세터(Custom Getter & Setter)
  - 필드 아래에 `get()`, `set()` 블록을 만들어 게터, 세터 로직을 추가할 수 있다.
- Backing Field : 프로퍼티 값을 실제로 저장하는 변수
  - 접근자 메서드 내에서 `field` 키워드 사용


# ▨ 상속(Inheritance) ▨
## :pushpin: 상속(Inheritance)
- 코틀린에서는 자바와 다르게 상속(extends) 구현(implements) 시 `:` 키워드를 사용한다.
- 코틀린의 모든 클래스는 기본적으로 `final` (상속 불가) 상태
- `open` 키워드 : 상속을 허용하기 위해 사용
- `override` 키워드 : 메서드 오버라이드 시 필수적으로 사용
- `abstract` 키워드 : 추상 클래스나 추상 메서드 선언 시 사용하며, 상속받는 클래스나 오버라이딩 되는 메서드에 별도의 `open` 키워드는 필요 없다.
- 컨벤션(관례) : 상속 구현 사용 시 `(공백):(공백)` 콜론 앞 뒤로 공백을 두는 관례가 있다.(Type과 구분)
- 상속을 받을 때 부모 클래스의 기본 생성자를 호출해야 한다.

## :pushpin: 인터페이스
- 인터페이스는 하나 이상의 추상 메서드를 포함할 수 있다.(추상 메서드-본문없는메서드)
- 디폴트 메서트 : 인터페이스에서 메서드가 본문을 가지는 경우, 코틀린에서는 디폴트 메서드 구현을 포함할 수 있다.

# ▨ 가시성 제어(접근 제한자, Visibility Modifier) ▨
## :pushpin: 가시성 제어(Visibility Modifier)
- 자바 : `public`, `protected`, `default`, `private`
  - `public` : 모든 곳에서 접근 가능
  - `protected` : 같은 패키지 또는 하위 클래스에서만 접근 가능
  - `default` : 같은 패키지에서만 접근 가능
  - `private` : 선언된 클래스에서만 접근 가능
- 코틀린 : `(public)`, `protected`, `internal`, `private`
  - `public` : 모든 곳에서 접근 가능
  - `protected` : ***선언된 클래스*** 또는 하위 클래스에서만 접근 가능(파일 최상단(Top-Level)에서는 사용 불가능)
  - `internal` : ***같은 모듈***에서만 접근 가능
  - `private` : 선언된 클래스에서만 접근 가능(같은 파일 내에서만 접근 가능)

## :pushpin: 모듈(Module)
- 함께 컴파일되는 파일(코틀린)들의 집합
  - IntelliJ IDEA 모듈
  - 메이븐 프로젝트 단위
  - Gradle Source Set
- 각각의 모듈은 독립적으로 컴파일 된다.
- 각 모듈은 자체적인 종속성을 가지고, 각각의 설정을 가질 수 있다.
- `internal` 접근 제어자는 모듈 내에서는 자유롭게 사용하지만, 라이브러리나 애플리케이션 단위에서는 내부 구현을 숨길 수 있다.

# ▨ Object 키워드 ▨
## :pushpin: Object 키워드
- `companion object` : 자바의 `static` 키워드에 대응하는 개념
  - 클래스 내부에 `static` 멤버를 정의할 때 사용
  - `companion object`는 하나의 객체로 간주되기 때문에, 다른 타입을 상속 및 구현받을 수 있다.
- `object` 키워드를 사용해서 만든 클래스는 싱글톤 클래스(단 하나의 인스턴스만 갖는 클래스)가 된다.
- 익명 객체를 만들 때는 `object: 타입이름`을 사용한다.

# ▨ 중첩 클래스(Nested Class) ▨
## :pushpin: 중첩 클래스(Nested Class)
1. 중첩 클래스(Nested Class)
   - 자바의 `static` 중첩 클래스와 유사하게 동작
   - 외부 클래스의 인스턴스에 대한 참조가 없다.
   - 기본적으로 바깥 클래스를 참조하지 않는다.(권장사항)
2. 내부 클래스(Inner Class)
   - 자바의 `static` 키워드가 없는 클래스와 유사하게 동작
   - 외부 클래스의 인스턴스와 연결되어 있다.
   - 바깥 클래스를 참조하려면 `inner` 키워드를 사용해야 한다.
   - 이름이 같은 바깥 클래스를 참조하려면 `this@OuterClass`(`this@바깥클래스명.참조변수`) 사용

# ▨ 여러 가지 클래스(Data Class, Enum Class, Sealed Class) ▨
## :pushpin: Data Class
- 클래스 앞에 `data` 키워드를 선언하여 사용
- 자동으로 `equals()`, `hashCode()`, `toString()` 등이 구현
- `copy()` 메서드, `componentN()` 메서드가 생성
- 구조분해 선언 사용 가능
- 데이터 보관 목적으로 사용되는 클래스의 보일러플레이트 코드(Boilerplate Code) 자동 생성
- VO, DTO 등에 효율적으로 사용
- 주의사항
  - data class는 최소 한 개의 매개변수가 있는 주 생성자 필요하다.
  - data class는 상속을 할 수 없다.
  - `abstract`, `open`, `inner` 등의 키워드 사용할 수 없다.

## :pushpin: Enum Class
- 고정된 상수 집합
- 각 항목이 Enum 클래스의 인스턴스로 존재
- 정해진 값들 중에서만 선택할 수 있도록 강제
- 프로퍼티와 메서드를 가질 수 있다.
- `when` 문과 함께 사용하게 될 경우 모든 경우를 처리할 수 있게 컴파일러가 항목을 검사한다.
- 누락된 항목이 없도록 컴파일 시점에 알게 된다.

## :pushpin: Sealed Class